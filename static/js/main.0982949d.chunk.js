(this.webpackJsonpniconico=this.webpackJsonpniconico||[]).push([[0],{64:function(e,t,n){e.exports=n(91)},69:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(8),s=n.n(r),c=(n(69),n(27)),o=n.n(c),u=n(35),l=n(47),d=n(48),m=n(54),h=n(55),p=n(122),f=n(126),_=n(93),k=n(127),v=n(130),g=n(128),E=n(129),x=n(28),w=n.n(x),y=n(131),b=n(132),C=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handler=document.createElement("iframe"),a.music_index=0,a.post_msg=function(e){if(null!==e.contentWindow)e.contentWindow.postMessage({sourceConnectorType:1,eventName:"play"},"https://embed.nicovideo.jp")},a.state={url:"",id:"niconico",rank_url:[],rank_title:[],random_check:!1,listener_id:""},a.bind(),a.get_ranking(),a}return Object(d.a)(n,[{key:"wait",value:function(){return new Promise((function(e){setTimeout((function(){}),2e3)}))}},{key:"get_ranking",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("https://niconico-vocaloid-ranking.herokuapp.com/ranking_api/?ranking");case 2:t=e.sent,this.setState({rank_url:t.data.url,rank_title:t.data.title,url:t.data.url[0]});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"post_favorite",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://niconico-vocaloid-ranking.herokuapp.com/ranking_api/?datapost",w.a.defaults.xsrfHeaderName="X-CSRFTOKEN",w.a.defaults.xsrfCookieName="csrftoken",e.next=5,w.a.post("https://niconico-vocaloid-ranking.herokuapp.com/ranking_api/?datapost",{user_id:this.state.listener_id,music_title:this.state.rank_title[this.music_index],music_url:this.state.rank_url[this.music_index],created_at:(new Date).toLocaleString()});case 5:e.sent,console.log(this.state.listener_id);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bind",value:function(){var e=this;window.addEventListener("message",(function(t){"playerStatusChange"==t.data.eventName&&4==t.data.data.playerStatus&&(e.music_index++,e.music_index%=100,e.state.random_check&&(e.music_index=Math.floor(100*Math.random())+0),e.ch_music(),setTimeout((function(){null!==e.handler&&e.post_msg(e.handler)}),2e3))}))}},{key:"ch_music",value:function(){var e=this;this.setState((function(t){return{url:e.state.rank_url[e.music_index]}}))}},{key:"renderPlayer",value:function(){null!=this.handler.contentWindow&&this.handler.contentWindow.postMessage({sourceConnectorType:1,eventName:"play"},"https://embed.nicovideo.jp")}},{key:"music",value:function(e){var t=this;"next"==e?(this.music_index++,this.music_index%=100):(this.music_index--,-1==this.music_index&&(this.music_index=99)),this.setState((function(e){return{url:t.state.rank_url[t.music_index]}}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement(p.a,{position:"static"},i.a.createElement(f.a,null,i.a.createElement(_.a,{variant:"h6"},"\u30dc\u30ab\u30ed\u30e9\u30f3\u30ad\u30f3\u30b0\u3092\u9023\u7d9a\u518d\u751f\u3057\u3066\u307f\u305f\uff01")))),i.a.createElement("iframe",{src:this.state.url,id:"nicoplayer",allowFullScreen:!0,ref:function(t){e.handler=t}},"hello"),i.a.createElement(k.a,{control:i.a.createElement(v.a,{checked:this.state.random_check,onChange:function(){e.setState({random_check:!e.state.random_check})},name:"checkedF"}),label:"Random"}),i.a.createElement(g.a,{onClick:function(){e.music("next")}},"NEXT"),i.a.createElement(g.a,{onClick:function(){e.music("prev")}},"PREV"),i.a.createElement(_.a,null,i.a.createElement("div",null,this.music_index+1,"\u4f4d\u306e\u697d\u66f2"),i.a.createElement("div",null,this.state.rank_title[this.music_index])),i.a.createElement(y.a,{title:this.state.rank_title[this.music_index]+" #"+this.state.url.substr(33,10)+" #\u30cb\u30b3\u30cb\u30b3\u52d5\u753b",url:"https://nico.ms/"+this.state.url.substr(33,11)+"ref=twitter_ss"},i.a.createElement(b.a,{size:32,round:!0})),i.a.createElement(g.a,{onClick:function(){return e.post_favorite()}},"\u3053\u308c\u3059\u304d\uff01"),i.a.createElement("form",{noValidate:!0,autoComplete:"off"},i.a.createElement(E.a,{id:"standard-basic",label:"ID",value:this.state.listener_id,onChange:function(t){e.setState({listener_id:t.target.value})}})))}}]),n}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.0982949d.chunk.js.map